============================= test session starts =============================
platform win32 -- Python 3.13.8, pytest-8.4.2, pluggy-1.6.0 -- C:\Users\BigTe\OneDrive\Desktop\DevScape\.venv\Scripts\python.exe
cachedir: .pytest_cache
rootdir: C:\Users\BigTe\OneDrive\Desktop\DevScape
configfile: pytest.ini
testpaths: tests
plugins: cov-7.0.0
collecting ... collected 148 items / 8 skipped

tests/test_badges.py::test_covenant_badge PASSED                         [  0%]
tests/test_badges.py::test_coverage_badge PASSED                         [  1%]
tests/test_badges.py::test_lineage_badge PASSED                          [  2%]
tests/test_draw_text.py::test_draw_text PASSED                           [  2%]
tests/test_exports.py::test_export_data PASSED                           [  3%]
tests/test_exports.py::test_export_timeline PASSED                       [  4%]
tests/test_exports.py::test_export_trait_chart PASSED                    [  4%]
tests/test_exports.py::test_export_constellation PASSED                  [  5%]
tests/test_game.py::test_generate_sprite PASSED                          [  6%]
tests/test_game.py::test_export_lore PASSED                              [  6%]
tests/test_game.py::test_generate_overlay_variants PASSED                [  7%]
tests/test_game.py::test_update_planetary_mood PASSED                    [  8%]
tests/test_game.py::test_apply_planetary_event_festival_and_eclipse PASSED [  8%]
tests/test_game.py::test_save_timeline_with_mock_io PASSED               [  9%]
tests/test_game.py::test_save_events_with_mock_io PASSED                 [ 10%]
tests/test_game.py::test_save_constellation_with_mock_io PASSED          [ 10%]
tests/test_game.py::test_export_data_structure PASSED                    [ 11%]
tests/test_game.py::test_render_pixel_art_calls_surface_methods PASSED   [ 12%]
tests/test_game.py::test_render_dashboard_content_includes_player_and_mood PASSED [ 12%]
tests/test_game.py::test_render_dashboard_content_includes_last_event PASSED [ 13%]
tests/test_game.py::test_render_dashboard_content_includes_timeline PASSED [ 14%]
tests/test_game.py::test_render_pixel_art_empty_glyph PASSED             [ 14%]
tests/test_game.py::test_export_timeline_structure PASSED                [ 15%]
tests/test_game.py::test_export_trait_chart_structure PASSED             [ 16%]
tests/test_game.py::test_export_constellation_structure PASSED           [ 16%]
tests/test_game.py::test_entity_description_includes_name_and_position PASSED [ 17%]
tests/test_game.py::test_render_dashboard_content_handles_empty_logs PASSED [ 18%]
tests/test_game.py::test_export_data_handles_missing_llm_character PASSED [ 18%]
tests/test_game.py::test_render_dashboard_content_includes_multiple_traits PASSED [ 19%]
tests/test_game.py::test_render_dashboard_content_handles_unusual_mood PASSED [ 20%]
tests/test_game.py::test_render_dashboard_content_handles_empty_traits PASSED [ 20%]
tests/test_game.py::test_render_dashboard_content_handles_missing_llm_character PASSED [ 21%]
tests/test_game.py::test_render_dashboard_content_with_mixed_logs PASSED [ 22%]
tests/test_game.py::test_draw_chat_bubble PASSED                         [ 22%]
tests/test_game.py::test_export_lineage_badge PASSED                     [ 23%]
tests/test_game.py::test_export_covenant_badge PASSED                    [ 24%]
tests/test_game.py::test_export_coverage_badge PASSED                    [ 25%]
tests/test_game.py::test_entity_move_no_op PASSED                        [ 25%]
tests/test_game.py::test_entity_move_diagonal_prevention PASSED          [ 26%]
tests/test_game.py::test_export_timeline_empty PASSED                    [ 27%]
tests/test_game.py::test_export_events_empty PASSED                      [ 27%]
tests/test_game.py::test_integration_player_journey_flow PASSED          [ 28%]
tests/test_game.py::test_integration_trait_evolution_sequence PASSED     [ 29%]
tests/test_game.py::test_coverage_threshold PASSED                       [ 29%]
tests/test_game.py::test_integration_large_logs PASSED                   [ 30%]
tests/test_game.py::test_render_pixel_art_handles_out_of_range PASSED    [ 31%]
tests/test_game.py::test_render_pixel_art_handles_empty_grid PASSED      [ 31%]
tests/test_game.py::test_integration_export_consistency_flow PASSED      [ 32%]
tests/test_game.py::test_integration_dashboard_snapshot_regression PASSED [ 33%]
tests/test_game.py::test_integration_entity_edge_names PASSED            [ 33%]
tests/test_game.py::test_export_data_handles_no_llm_character PASSED     [ 34%]
tests/test_game.py::test_integration_massive_trait_dict PASSED           [ 35%]
tests/test_game.py::test_integration_mixed_log_types PASSED              [ 35%]
tests/test_game.py::test_integration_trait_edge_cases PASSED             [ 36%]
tests/test_game.py::test_export_data_includes_timestamp_and_version PASSED [ 37%]
tests/test_game.py::test_integration_empty_logs_rendering PASSED         [ 37%]
tests/test_game.py::test_export_data_handles_non_serializable_entries PASSED [ 38%]
tests/test_main.py::TestGame::test_apply_planetary_event PASSED          [ 39%]
tests/test_main.py::TestGame::test_export_constellation PASSED           [ 39%]
tests/test_main.py::TestGame::test_export_covenant_badge PASSED          [ 40%]
tests/test_main.py::TestGame::test_export_coverage_badge PASSED          [ 41%]
tests/test_main.py::TestGame::test_export_data PASSED                    [ 41%]
tests/test_main.py::TestGame::test_export_data_no_llm_traits PASSED      [ 42%]
tests/test_main.py::TestGame::test_export_events PASSED                  [ 43%]
tests/test_main.py::TestGame::test_export_lineage_badge PASSED           [ 43%]
tests/test_main.py::TestGame::test_export_lore PASSED                    [ 44%]
tests/test_main.py::TestGame::test_export_timeline PASSED                [ 45%]
tests/test_main.py::TestGame::test_export_trait_chart PASSED             [ 45%]
tests/test_main.py::TestGame::test_generate_overlay PASSED               [ 46%]
tests/test_main.py::TestGame::test_generate_sprite PASSED                [ 47%]
tests/test_main.py::TestGame::test_save_constellation PASSED             [ 47%]
tests/test_main.py::TestGame::test_save_events PASSED                    [ 48%]
tests/test_main.py::TestGame::test_save_timeline PASSED                  [ 49%]
tests/test_main.py::TestGame::test_update_camera_clamping PASSED         [ 50%]
tests/test_main.py::TestGame::test_update_llm_move_exception_handling PASSED [ 50%]
tests/test_main.py::TestGame::test_update_llm_move_silent_indicator PASSED [ 51%]
tests/test_main.py::TestGame::test_update_llm_move_with_dialogue PASSED  [ 52%]
tests/test_main.py::TestGame::test_update_planetary_mood PASSED          [ 52%]
tests/test_main.py::TestGame::test_update_trait_evolution PASSED         [ 53%]
tests/test_main_apply_planetary_event.py::test_apply_planetary_event_variants PASSED [ 54%]
tests/test_main_camera_clamp.py::test_camera_clamps_inside_world_bounds PASSED [ 54%]
tests/test_main_camera_clamp.py::test_camera_centering_near_player PASSED [ 55%]
tests/test_main_cover_more.py::test_game_init_and_entity_lifecycle PASSED [ 56%]
tests/test_main_cover_more.py::test_game_falls_back_on_missing_methods PASSED [ 56%]
tests/test_main_events.py::test_apply_planetary_event_storm_decreases_courage PASSED [ 57%]
tests/test_main_events.py::test_apply_planetary_event_eclipse_increases_focus PASSED [ 58%]
tests/test_main_events.py::test_apply_planetary_event_festival_increases_empathy PASSED [ 58%]
tests/test_main_events.py::test_apply_planetary_event_unknown_event_resets_mood PASSED [ 59%]
tests/test_main_exports.py::test_export_constellation_empty_logs PASSED  [ 60%]
tests/test_main_exports.py::test_export_constellation_with_events PASSED [ 60%]
tests/test_main_game_helpers.py::test_generate_overlay_variants PASSED   [ 61%]
tests/test_main_game_helpers.py::test_render_helper_invoked PASSED       [ 62%]
tests/test_main_helpers_again.py::test_game_helpers_and_overlay_consistency PASSED [ 62%]
tests/test_main_input_and_send.py::test_handle_text_input_and_backspace_behaviour PASSED [ 63%]
tests/test_main_input_and_send.py::test_handle_keydown_enter_sends_message_and_handles_exception PASSED [ 64%]
tests/test_main_minimal.py::test_module_constants PASSED                 [ 64%]
tests/test_main_minimal.py::test_game_can_be_instantiated_with_stubbed_dependencies PASSED [ 65%]
tests/test_main_overlay.py::test_generate_overlay_happy_mood PASSED      [ 66%]
tests/test_main_overlay.py::test_generate_overlay_neutral_mood PASSED    [ 66%]
tests/test_main_overlay.py::test_generate_overlay_unknown_mood_defaults_to_neutral PASSED [ 67%]
tests/test_main_update_chat_and_silent.py::test_chat_bubble_expiry PASSED [ 68%]
tests/test_main_update_chat_and_silent.py::test_llm_chat_and_silent_indicators PASSED [ 68%]
tests/test_ollama_ai.py::test_get_llm_move_success PASSED                [ 69%]
tests/test_ollama_ai.py::test_get_llm_move_malformed_response PASSED     [ 70%]
tests/test_ollama_ai.py::test_get_llm_move_timeout PASSED                [ 70%]
tests/test_ollama_ai_branches2.py::test_request_text_various_shapes PASSED [ 71%]
tests/test_ollama_ai_branches2.py::test_get_llm_move_transport_error PASSED [ 72%]
tests/test_ollama_ai_extra.py::test_ollama_client_send_request_success PASSED [ 72%]
tests/test_ollama_ai_extra.py::test_ollama_client_send_request_non200_raises PASSED [ 73%]
tests/test_ollama_ai_extra.py::test_ollama_client_send_request_chunked_response PASSED [ 74%]
tests/test_ollama_ai_get_move.py::test_get_llm_move_success SKIPPED      [ 75%]
tests/test_ollama_ai_get_move.py::test_get_llm_move_handles_transport_error SKIPPED [ 75%]
tests/test_ollama_ai_parser.py::test_parse_content_variants[MOVE: [1,0] | SAY: I will advance.-expected_move0-I will advance.] PASSED [ 76%]
tests/test_ollama_ai_parser.py::test_parse_content_variants[SAY: Hello there-None-Hello there] PASSED [ 77%]
tests/test_ollama_ai_parser.py::test_parse_content_variants[MOVE:[-2, 3] SAY: cautiously approach-expected_move2-cautiously approach] PASSED [ 77%]
tests/test_ollama_ai_parser.py::test_parse_content_variants[MOVE: 0,0-expected_move3-] PASSED [ 78%]
tests/test_ollama_ai_parser.py::test_parse_content_variants[Completely unrelated text-None-Completely unrelated text] PASSED [ 79%]
tests/test_ollama_ai_parser.py::test_parse_content_variants[MOVE: [bad, data] SAY: fallback dialogue-None-fallback dialogue] PASSED [ 79%]
tests/test_ollama_ai_parser.py::test_parse_content_variants[-None-] PASSED [ 80%]
tests/test_ollama_ai_parser.py::test_parse_content_variants[None-None-] PASSED [ 81%]
tests/test_ollama_ai_parsing.py::test_send_request_success_json_content PASSED [ 81%]
tests/test_ollama_ai_parsing.py::test_send_request_success_text_content PASSED [ 82%]
tests/test_ollama_ai_parsing.py::test_send_request_non200_status_error_handling PASSED [ 83%]
tests/test_ollama_ai_parsing.py::test_send_request_transport_error_handling PASSED [ 83%]
tests/test_ollama_ai_requests.py::test_send_request_success_returns_content PASSED [ 84%]
tests/test_ollama_ai_requests.py::test_send_request_malformed_json_returns_text PASSED [ 85%]
tests/test_ollama_ai_requests.py::test_send_request_http_error_uses_fallback PASSED [ 85%]
tests/test_ollama_ai_unit.py::test_send_request_returns_payload_on_success PASSED [ 86%]
tests/test_ollama_ai_unit.py::test_send_request_raises_on_client_error PASSED [ 87%]
tests/test_rendering.py::TestDrawChatBubble::test_draw_chat_bubble_basic 